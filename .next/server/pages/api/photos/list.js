"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/photos/list";
exports.ids = ["pages/api/photos/list"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fphotos%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fphotos%2Flist.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fphotos%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fphotos%2Flist.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_photos_list_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/photos/list.js */ \"(api)/./pages/api/photos/list.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_photos_list_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_photos_list_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/photos/list\",\n        pathname: \"/api/photos/list\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_photos_list_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBob3RvcyUyRmxpc3QmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnBob3RvcyUyRmxpc3QuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDdUQ7QUFDdkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tdWx0aS10ZW5hbnQtcGhvdG8tYWxidW0vP2MwOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9waG90b3MvbGlzdC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Bob3Rvcy9saXN0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGhvdG9zL2xpc3RcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fphotos%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fphotos%2Flist.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabaseClient.js":
/*!*******************************!*\
  !*** ./lib/supabaseClient.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://woordcrxapqshfunnvlv.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indvb3JkY3J4YXBxc2hmdW5udmx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4NTU1MDksImV4cCI6MjA3MTQzMTUwOX0.OdjhQP-BcBMb-CrVpI9zNHTI1VIp0GbjFOGIgY8SeAM\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: true\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUVqRSxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDLE1BQU0sSUFBSUUsTUFBTTtBQUNsQjtBQUVPLE1BQU1DLFdBQVdSLG1FQUFZQSxDQUFDQyxhQUFhSSxpQkFBaUI7SUFDakVJLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7UUFDaEJDLG9CQUFvQjtJQUN0QjtBQUNGLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tdWx0aS10ZW5hbnQtcGhvdG8tYWxidW0vLi9saWIvc3VwYWJhc2VDbGllbnQuanM/NWYwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gIGF1dGg6IHtcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZVxuICB9XG59KSJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZGV0ZWN0U2Vzc2lvbkluVXJsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseClient.js\n");

/***/ }),

/***/ "(api)/./lib/textUtils.js":
/*!**************************!*\
  !*** ./lib/textUtils.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   filterBySearch: () => (/* binding */ filterBySearch),\n/* harmony export */   matchesSearch: () => (/* binding */ matchesSearch),\n/* harmony export */   normalizeText: () => (/* binding */ normalizeText)\n/* harmony export */ });\n// Utility functions for text processing\n/**\n * Normalizes text by removing diacritics and converting to lowercase\n * @param {string} text - The text to normalize\n * @returns {string} - The normalized text\n */ function normalizeText(text) {\n    if (!text || typeof text !== \"string\") return \"\";\n    return text.toLowerCase().normalize(\"NFD\") // Decompose combined characters\n    .replace(/[\\u0300-\\u036f]/g, \"\") // Remove diacritical marks\n    .replace(/[șş]/g, \"s\") // Handle Romanian specific characters\n    .replace(/[țţ]/g, \"t\").replace(/[ăâ]/g, \"a\").replace(/[îi]/g, \"i\").trim();\n}\n/**\n * Checks if a normalized search term matches normalized content\n * @param {string} content - The content to search in\n * @param {string} searchTerm - The search term\n * @returns {boolean} - Whether the search term matches\n */ function matchesSearch(content, searchTerm) {\n    if (!content || !searchTerm) return false;\n    const normalizedContent = normalizeText(content);\n    const normalizedSearch = normalizeText(searchTerm);\n    return normalizedContent.includes(normalizedSearch);\n}\n/**\n * Filters an array of objects by searching in specified fields\n * @param {Array} items - Array of objects to filter\n * @param {string} searchTerm - The search term\n * @param {Array} fields - Array of field names to search in\n * @returns {Array} - Filtered array\n */ function filterBySearch(items, searchTerm, fields = []) {\n    if (!searchTerm || !Array.isArray(items)) return items;\n    const normalizedSearch = normalizeText(searchTerm);\n    return items.filter((item)=>{\n        return fields.some((field)=>{\n            const fieldValue = item[field];\n            if (!fieldValue) return false;\n            // Handle arrays (like hashtags)\n            if (Array.isArray(fieldValue)) {\n                return fieldValue.some((val)=>matchesSearch(String(val), normalizedSearch));\n            }\n            // Handle strings\n            return matchesSearch(String(fieldValue), normalizedSearch);\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdGV4dFV0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHdDQUF3QztBQUV4Qzs7OztDQUlDLEdBQ00sU0FBU0EsY0FBY0MsSUFBSTtJQUNoQyxJQUFJLENBQUNBLFFBQVEsT0FBT0EsU0FBUyxVQUFVLE9BQU87SUFFOUMsT0FBT0EsS0FDSkMsV0FBVyxHQUNYQyxTQUFTLENBQUMsT0FBTyxnQ0FBZ0M7S0FDakRDLE9BQU8sQ0FBQyxvQkFBb0IsSUFBSSwyQkFBMkI7S0FDM0RBLE9BQU8sQ0FBQyxTQUFTLEtBQUssc0NBQXNDO0tBQzVEQSxPQUFPLENBQUMsU0FBUyxLQUNqQkEsT0FBTyxDQUFDLFNBQVMsS0FDakJBLE9BQU8sQ0FBQyxTQUFTLEtBQ2pCQyxJQUFJO0FBQ1Q7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNDLGNBQWNDLE9BQU8sRUFBRUMsVUFBVTtJQUMvQyxJQUFJLENBQUNELFdBQVcsQ0FBQ0MsWUFBWSxPQUFPO0lBRXBDLE1BQU1DLG9CQUFvQlQsY0FBY087SUFDeEMsTUFBTUcsbUJBQW1CVixjQUFjUTtJQUV2QyxPQUFPQyxrQkFBa0JFLFFBQVEsQ0FBQ0Q7QUFDcEM7QUFFQTs7Ozs7O0NBTUMsR0FDTSxTQUFTRSxlQUFlQyxLQUFLLEVBQUVMLFVBQVUsRUFBRU0sU0FBUyxFQUFFO0lBQzNELElBQUksQ0FBQ04sY0FBYyxDQUFDTyxNQUFNQyxPQUFPLENBQUNILFFBQVEsT0FBT0E7SUFFakQsTUFBTUgsbUJBQW1CVixjQUFjUTtJQUV2QyxPQUFPSyxNQUFNSSxNQUFNLENBQUNDLENBQUFBO1FBQ2xCLE9BQU9KLE9BQU9LLElBQUksQ0FBQ0MsQ0FBQUE7WUFDakIsTUFBTUMsYUFBYUgsSUFBSSxDQUFDRSxNQUFNO1lBQzlCLElBQUksQ0FBQ0MsWUFBWSxPQUFPO1lBRXhCLGdDQUFnQztZQUNoQyxJQUFJTixNQUFNQyxPQUFPLENBQUNLLGFBQWE7Z0JBQzdCLE9BQU9BLFdBQVdGLElBQUksQ0FBQ0csQ0FBQUEsTUFBT2hCLGNBQWNpQixPQUFPRCxNQUFNWjtZQUMzRDtZQUVBLGlCQUFpQjtZQUNqQixPQUFPSixjQUFjaUIsT0FBT0YsYUFBYVg7UUFDM0M7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVsdGktdGVuYW50LXBob3RvLWFsYnVtLy4vbGliL3RleHRVdGlscy5qcz8xODU4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciB0ZXh0IHByb2Nlc3NpbmdcblxuLyoqXG4gKiBOb3JtYWxpemVzIHRleHQgYnkgcmVtb3ZpbmcgZGlhY3JpdGljcyBhbmQgY29udmVydGluZyB0byBsb3dlcmNhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHRleHQgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIFRoZSBub3JtYWxpemVkIHRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRleHQodGV4dCkge1xuICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSByZXR1cm4gJydcbiAgXG4gIHJldHVybiB0ZXh0XG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAubm9ybWFsaXplKCdORkQnKSAvLyBEZWNvbXBvc2UgY29tYmluZWQgY2hhcmFjdGVyc1xuICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJykgLy8gUmVtb3ZlIGRpYWNyaXRpY2FsIG1hcmtzXG4gICAgLnJlcGxhY2UoL1vImcWfXS9nLCAncycpIC8vIEhhbmRsZSBSb21hbmlhbiBzcGVjaWZpYyBjaGFyYWN0ZXJzXG4gICAgLnJlcGxhY2UoL1vIm8WjXS9nLCAndCcpXG4gICAgLnJlcGxhY2UoL1vEg8OiXS9nLCAnYScpXG4gICAgLnJlcGxhY2UoL1vDrmldL2csICdpJylcbiAgICAudHJpbSgpXG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbm9ybWFsaXplZCBzZWFyY2ggdGVybSBtYXRjaGVzIG5vcm1hbGl6ZWQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgLSBUaGUgY29udGVudCB0byBzZWFyY2ggaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWFyY2hUZXJtIC0gVGhlIHNlYXJjaCB0ZXJtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoZSBzZWFyY2ggdGVybSBtYXRjaGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzU2VhcmNoKGNvbnRlbnQsIHNlYXJjaFRlcm0pIHtcbiAgaWYgKCFjb250ZW50IHx8ICFzZWFyY2hUZXJtKSByZXR1cm4gZmFsc2VcbiAgXG4gIGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gbm9ybWFsaXplVGV4dChjb250ZW50KVxuICBjb25zdCBub3JtYWxpemVkU2VhcmNoID0gbm9ybWFsaXplVGV4dChzZWFyY2hUZXJtKVxuICBcbiAgcmV0dXJuIG5vcm1hbGl6ZWRDb250ZW50LmluY2x1ZGVzKG5vcm1hbGl6ZWRTZWFyY2gpXG59XG5cbi8qKlxuICogRmlsdGVycyBhbiBhcnJheSBvZiBvYmplY3RzIGJ5IHNlYXJjaGluZyBpbiBzcGVjaWZpZWQgZmllbGRzXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtcyAtIEFycmF5IG9mIG9iamVjdHMgdG8gZmlsdGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoVGVybSAtIFRoZSBzZWFyY2ggdGVybVxuICogQHBhcmFtIHtBcnJheX0gZmllbGRzIC0gQXJyYXkgb2YgZmllbGQgbmFtZXMgdG8gc2VhcmNoIGluXG4gKiBAcmV0dXJucyB7QXJyYXl9IC0gRmlsdGVyZWQgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckJ5U2VhcmNoKGl0ZW1zLCBzZWFyY2hUZXJtLCBmaWVsZHMgPSBbXSkge1xuICBpZiAoIXNlYXJjaFRlcm0gfHwgIUFycmF5LmlzQXJyYXkoaXRlbXMpKSByZXR1cm4gaXRlbXNcbiAgXG4gIGNvbnN0IG5vcm1hbGl6ZWRTZWFyY2ggPSBub3JtYWxpemVUZXh0KHNlYXJjaFRlcm0pXG4gIFxuICByZXR1cm4gaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgIHJldHVybiBmaWVsZHMuc29tZShmaWVsZCA9PiB7XG4gICAgICBjb25zdCBmaWVsZFZhbHVlID0gaXRlbVtmaWVsZF1cbiAgICAgIGlmICghZmllbGRWYWx1ZSkgcmV0dXJuIGZhbHNlXG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBhcnJheXMgKGxpa2UgaGFzaHRhZ3MpXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmllbGRWYWx1ZS5zb21lKHZhbCA9PiBtYXRjaGVzU2VhcmNoKFN0cmluZyh2YWwpLCBub3JtYWxpemVkU2VhcmNoKSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHN0cmluZ3NcbiAgICAgIHJldHVybiBtYXRjaGVzU2VhcmNoKFN0cmluZyhmaWVsZFZhbHVlKSwgbm9ybWFsaXplZFNlYXJjaClcbiAgICB9KVxuICB9KVxufSJdLCJuYW1lcyI6WyJub3JtYWxpemVUZXh0IiwidGV4dCIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplIiwicmVwbGFjZSIsInRyaW0iLCJtYXRjaGVzU2VhcmNoIiwiY29udGVudCIsInNlYXJjaFRlcm0iLCJub3JtYWxpemVkQ29udGVudCIsIm5vcm1hbGl6ZWRTZWFyY2giLCJpbmNsdWRlcyIsImZpbHRlckJ5U2VhcmNoIiwiaXRlbXMiLCJmaWVsZHMiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJpdGVtIiwic29tZSIsImZpZWxkIiwiZmllbGRWYWx1ZSIsInZhbCIsIlN0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/textUtils.js\n");

/***/ }),

/***/ "(api)/./pages/api/photos/list.js":
/*!**********************************!*\
  !*** ./pages/api/photos/list.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/supabaseClient */ \"(api)/./lib/supabaseClient.js\");\n/* harmony import */ var _lib_textUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/textUtils */ \"(api)/./lib/textUtils.js\");\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Metoda nu este permisă\"\n        });\n    }\n    const { familyId, search, category, hashtag, sort = \"newest\", dateStart, dateEnd, childId } = req.query;\n    if (!familyId) {\n        return res.status(400).json({\n            error: \"ID-ul familiei este obligatoriu\"\n        });\n    }\n    try {\n        // Start with basic query\n        let query = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"photos\").select(\"*\").eq(\"family_id\", familyId);\n        // Apply non-search filters at database level for performance\n        if (category && category !== \"all\") {\n            query = query.eq(\"category\", category);\n        }\n        // Apply date range filter\n        if (dateStart && dateEnd) {\n            query = query.gte(\"created_at\", dateStart).lte(\"created_at\", dateEnd);\n        }\n        // Apply sorting\n        switch(sort){\n            case \"oldest\":\n                query = query.order(\"created_at\", {\n                    ascending: true\n                });\n                break;\n            case \"title_asc\":\n                query = query.order(\"title\", {\n                    ascending: true\n                });\n                break;\n            case \"title_desc\":\n                query = query.order(\"title\", {\n                    ascending: false\n                });\n                break;\n            case \"newest\":\n            default:\n                query = query.order(\"created_at\", {\n                    ascending: false\n                });\n                break;\n        }\n        const { data, error } = await query;\n        if (error) {\n            throw error;\n        }\n        let filteredData = data || [];\n        // Apply child filter by querying child_posts table separately\n        if (childId) {\n            // Get all photo IDs associated with this child\n            const { data: childPosts, error: childError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"child_posts\").select(\"photo_id\").eq(\"child_id\", childId);\n            if (childError) {\n                console.error(\"Child posts fetch error:\", childError);\n            } else {\n                // Filter photos to only include those associated with the selected child\n                const childPhotoIds = childPosts.map((cp)=>cp.photo_id);\n                filteredData = filteredData.filter((photo)=>childPhotoIds.includes(photo.id));\n            }\n        }\n        // Apply diacritic-insensitive search filter client-side\n        if (search) {\n            // Check if search starts with # for hashtag search\n            if (search.startsWith(\"#\")) {\n                const hashtagValue = search.substring(1);\n                filteredData = filteredData.filter((item)=>{\n                    if (!item.hashtags || !Array.isArray(item.hashtags)) return false;\n                    return item.hashtags.some((tag)=>(0,_lib_textUtils__WEBPACK_IMPORTED_MODULE_1__.matchesSearch)(tag, hashtagValue));\n                });\n            } else {\n                filteredData = filteredData.filter((item)=>{\n                    // Search in title, description, and hashtags\n                    const titleMatch = (0,_lib_textUtils__WEBPACK_IMPORTED_MODULE_1__.matchesSearch)(item.title || \"\", search);\n                    const descriptionMatch = (0,_lib_textUtils__WEBPACK_IMPORTED_MODULE_1__.matchesSearch)(item.description || \"\", search);\n                    // Search in hashtags\n                    let hashtagMatch = false;\n                    if (item.hashtags && Array.isArray(item.hashtags)) {\n                        hashtagMatch = item.hashtags.some((tag)=>(0,_lib_textUtils__WEBPACK_IMPORTED_MODULE_1__.matchesSearch)(tag, search));\n                    }\n                    return titleMatch || descriptionMatch || hashtagMatch;\n                });\n            }\n        }\n        // Apply hashtag filter client-side for diacritic support\n        if (hashtag) {\n            filteredData = filteredData.filter((item)=>{\n                if (!item.hashtags || !Array.isArray(item.hashtags)) return false;\n                return item.hashtags.some((tag)=>(0,_lib_textUtils__WEBPACK_IMPORTED_MODULE_1__.matchesSearch)(tag, hashtag));\n            });\n        }\n        return res.status(200).json({\n            success: true,\n            photos: filteredData\n        });\n    } catch (error) {\n        console.error(\"Photos fetch error:\", error);\n        return res.status(500).json({\n            error: \"\\xcencărcarea fotografiilor a eșuat\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWxidW0vLi9wYWdlcy9hcGkvcGhvdG9zL2xpc3QuanM/NWU0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdXBhYmFzZUNsaWVudCdcbmltcG9ydCB7IG5vcm1hbGl6ZVRleHQsIG1hdGNoZXNTZWFyY2ggfSBmcm9tICcuLi8uLi8uLi9saWIvdGV4dFV0aWxzJ1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0b2RhIG51IGVzdGUgcGVybWlzxIMnIH0pXG4gIH1cblxuICBjb25zdCB7IFxuICAgIGZhbWlseUlkLCBcbiAgICBzZWFyY2gsIFxuICAgIGNhdGVnb3J5LCBcbiAgICBoYXNodGFnLCBcbiAgICBzb3J0ID0gJ25ld2VzdCcsXG4gICAgZGF0ZVN0YXJ0LFxuICAgIGRhdGVFbmQsXG4gICAgY2hpbGRJZFxuICB9ID0gcmVxLnF1ZXJ5XG5cbiAgaWYgKCFmYW1pbHlJZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSUQtdWwgZmFtaWxpZWkgZXN0ZSBvYmxpZ2F0b3JpdScgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gU3RhcnQgd2l0aCBiYXNpYyBxdWVyeVxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGhvdG9zJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdmYW1pbHlfaWQnLCBmYW1pbHlJZClcblxuICAgIC8vIEFwcGx5IG5vbi1zZWFyY2ggZmlsdGVycyBhdCBkYXRhYmFzZSBsZXZlbCBmb3IgcGVyZm9ybWFuY2VcbiAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkgIT09ICdhbGwnKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjYXRlZ29yeScsIGNhdGVnb3J5KVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGRhdGUgcmFuZ2UgZmlsdGVyXG4gICAgaWYgKGRhdGVTdGFydCAmJiBkYXRlRW5kKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnY3JlYXRlZF9hdCcsIGRhdGVTdGFydCkubHRlKCdjcmVhdGVkX2F0JywgZGF0ZUVuZClcbiAgICB9XG5cbiAgICAvLyBBcHBseSBzb3J0aW5nXG4gICAgc3dpdGNoIChzb3J0KSB7XG4gICAgICBjYXNlICdvbGRlc3QnOlxuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3RpdGxlX2FzYyc6XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoJ3RpdGxlJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3RpdGxlX2Rlc2MnOlxuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCd0aXRsZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbmV3ZXN0JzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGxldCBmaWx0ZXJlZERhdGEgPSBkYXRhIHx8IFtdXG5cbiAgICAvLyBBcHBseSBjaGlsZCBmaWx0ZXIgYnkgcXVlcnlpbmcgY2hpbGRfcG9zdHMgdGFibGUgc2VwYXJhdGVseVxuICAgIGlmIChjaGlsZElkKSB7XG4gICAgICAvLyBHZXQgYWxsIHBob3RvIElEcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjaGlsZFxuICAgICAgY29uc3QgeyBkYXRhOiBjaGlsZFBvc3RzLCBlcnJvcjogY2hpbGRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NoaWxkX3Bvc3RzJylcbiAgICAgICAgLnNlbGVjdCgncGhvdG9faWQnKVxuICAgICAgICAuZXEoJ2NoaWxkX2lkJywgY2hpbGRJZClcblxuICAgICAgaWYgKGNoaWxkRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ2hpbGQgcG9zdHMgZmV0Y2ggZXJyb3I6JywgY2hpbGRFcnJvcilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciBwaG90b3MgdG8gb25seSBpbmNsdWRlIHRob3NlIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VsZWN0ZWQgY2hpbGRcbiAgICAgICAgY29uc3QgY2hpbGRQaG90b0lkcyA9IGNoaWxkUG9zdHMubWFwKGNwID0+IGNwLnBob3RvX2lkKVxuICAgICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKHBob3RvID0+IGNoaWxkUGhvdG9JZHMuaW5jbHVkZXMocGhvdG8uaWQpKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGRpYWNyaXRpYy1pbnNlbnNpdGl2ZSBzZWFyY2ggZmlsdGVyIGNsaWVudC1zaWRlXG4gICAgaWYgKHNlYXJjaCkge1xuICAgICAgLy8gQ2hlY2sgaWYgc2VhcmNoIHN0YXJ0cyB3aXRoICMgZm9yIGhhc2h0YWcgc2VhcmNoXG4gICAgICBpZiAoc2VhcmNoLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICBjb25zdCBoYXNodGFnVmFsdWUgPSBzZWFyY2guc3Vic3RyaW5nKDEpXG4gICAgICAgIGZpbHRlcmVkRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgaWYgKCFpdGVtLmhhc2h0YWdzIHx8ICFBcnJheS5pc0FycmF5KGl0ZW0uaGFzaHRhZ3MpKSByZXR1cm4gZmFsc2VcbiAgICAgICAgICByZXR1cm4gaXRlbS5oYXNodGFncy5zb21lKHRhZyA9PiBtYXRjaGVzU2VhcmNoKHRhZywgaGFzaHRhZ1ZhbHVlKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbHRlcmVkRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgLy8gU2VhcmNoIGluIHRpdGxlLCBkZXNjcmlwdGlvbiwgYW5kIGhhc2h0YWdzXG4gICAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IG1hdGNoZXNTZWFyY2goaXRlbS50aXRsZSB8fCAnJywgc2VhcmNoKVxuICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uTWF0Y2ggPSBtYXRjaGVzU2VhcmNoKGl0ZW0uZGVzY3JpcHRpb24gfHwgJycsIHNlYXJjaClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTZWFyY2ggaW4gaGFzaHRhZ3NcbiAgICAgICAgICBsZXQgaGFzaHRhZ01hdGNoID0gZmFsc2VcbiAgICAgICAgICBpZiAoaXRlbS5oYXNodGFncyAmJiBBcnJheS5pc0FycmF5KGl0ZW0uaGFzaHRhZ3MpKSB7XG4gICAgICAgICAgICBoYXNodGFnTWF0Y2ggPSBpdGVtLmhhc2h0YWdzLnNvbWUodGFnID0+IG1hdGNoZXNTZWFyY2godGFnLCBzZWFyY2gpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdGl0bGVNYXRjaCB8fCBkZXNjcmlwdGlvbk1hdGNoIHx8IGhhc2h0YWdNYXRjaFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGhhc2h0YWcgZmlsdGVyIGNsaWVudC1zaWRlIGZvciBkaWFjcml0aWMgc3VwcG9ydFxuICAgIGlmIChoYXNodGFnKSB7XG4gICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoIWl0ZW0uaGFzaHRhZ3MgfHwgIUFycmF5LmlzQXJyYXkoaXRlbS5oYXNodGFncykpIHJldHVybiBmYWxzZVxuICAgICAgICByZXR1cm4gaXRlbS5oYXNodGFncy5zb21lKHRhZyA9PiBtYXRjaGVzU2VhcmNoKHRhZywgaGFzaHRhZykpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcGhvdG9zOiBmaWx0ZXJlZERhdGFcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUGhvdG9zIGZldGNoIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnw45uY8SDcmNhcmVhIGZvdG9ncmFmaWlsb3IgYSBlyJl1YXQnIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJub3JtYWxpemVUZXh0IiwibWF0Y2hlc1NlYXJjaCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJmYW1pbHlJZCIsInNlYXJjaCIsImNhdGVnb3J5IiwiaGFzaHRhZyIsInNvcnQiLCJkYXRlU3RhcnQiLCJkYXRlRW5kIiwiY2hpbGRJZCIsInF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsImVxIiwiZ3RlIiwibHRlIiwib3JkZXIiLCJhc2NlbmRpbmciLCJkYXRhIiwiZmlsdGVyZWREYXRhIiwiY2hpbGRQb3N0cyIsImNoaWxkRXJyb3IiLCJjb25zb2xlIiwiY2hpbGRQaG90b0lkcyIsIm1hcCIsImNwIiwicGhvdG9faWQiLCJmaWx0ZXIiLCJwaG90byIsImluY2x1ZGVzIiwiaWQiLCJzdGFydHNXaXRoIiwiaGFzaHRhZ1ZhbHVlIiwic3Vic3RyaW5nIiwiaXRlbSIsImhhc2h0YWdzIiwiQXJyYXkiLCJpc0FycmF5Iiwic29tZSIsInRhZyIsInRpdGxlTWF0Y2giLCJ0aXRsZSIsImRlc2NyaXB0aW9uTWF0Y2giLCJkZXNjcmlwdGlvbiIsImhhc2h0YWdNYXRjaCIsInN1Y2Nlc3MiLCJwaG90b3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/photos/list.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fphotos%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fphotos%2Flist.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();